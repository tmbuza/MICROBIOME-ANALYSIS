<!-- # General Overview -->
## What is metadata?
* <b>Metadata</b> is a set of data that describes and provides information about other data. It is commonly defined as **data about data**.
* **Sample metadata** described in this book refers to the description and context of the individual sample collected for a specific microbiome study.

<br>

## Metadata structure
* Metadata collected at different stages (Figure 1) are typically organized in an Excel or Google spreadsheet where:
  * The metadata table columns represent the properties of the samples.
  * The metadata table rows contain information associated with the samples.
  * Typically, the first column of sample metadata is Sample ID, which designates the key associated to individual sample
  * Sampl ID must be unique.

<br>

## Embedded metadata
* In most cases, you will find the metadata detached from the experimental data.
* Embedded metadata integrates the experimental data especially for graphics.
* Major microbiome analysis platforms require sample metadata, commonly referred to as **mapping file** when performing downstream analysis.

<br>

# Explore SRA metadata
- Typically, after sequencing the microbiome DNA, the investigators are encouraged to deposit the sequence reads in a public repository. The Sequence Read Archive (SRA) is currently the best bioinformatics database for read information. The good thing about SRA is that it integrates data from the NCBI, the European Bioinformatics Institute (EBI), and the DNA Data Bank of Japan (DDBJ).
- This demo uses metadata associated with four microbiome BioProjects, including:
  - [PRJNA477349](https://www.ncbi.nlm.nih.gov/sra/?term=PRJNA477349): 16S rRNA from bushmeat samples collected from Tanzania Metagenome
  - [PRJNA685168](https://www.ncbi.nlm.nih.gov/sra/?term=PRJNA685168): Multi-omics suggest diverse mechanisms for response to biologic therapies in IBD
  - [PRJEB21612](https://www.ncbi.nlm.nih.gov/sra/?term=PRJEB21612): Alterations of the gut microbiome in hypertension
  - [PRJNA802976](https://www.ncbi.nlm.nih.gov/sra/?term=PRJNA802976): Changes to Gut Microbiota following Systemic Antibiotic Administration in Infants

![Example screen shot of SRA Run Selector for metadata associated with the NCBI-SRA bioproject number PRJNA477349](images/sra_run_selector.png)

<br><br>

## Filtering metadata
- You may want the sample metadata to include a few desired variables. 
- It is a good habit to rename, modify or replace longer column names with meaningful names.
- We will select a few columns to create a desired metadata for downstream analyses.

<br><br>

## Column names of selected Projects for demo
- BioProject number:
  - [PRJNA477349](https://www.ncbi.nlm.nih.gov/sra/?term=PRJNA477349): Multispecies 16S rRNA from bushmeat samples collected from Tanzania.
  
```{r}
# library(tidyverse, suppressPackageStartupMessages())

# col <- read_csv("../../data/metadata/metadata.csv", show_col_types = FALSE) %>% 
# colnames() %>% 
# as.data.frame()

# colnames(col)[1] <- "PRJNA477349"
# print(col)
```


  - [PRJNA685168](https://www.ncbi.nlm.nih.gov/sra/?term=PRJNA685168): Multi-omics response to biologic therapies in IBD.

```{r}
# library(tidyverse, suppressPackageStartupMessages())

# col <- read_csv("../../data/metadata/ibd.csv", show_col_types = FALSE) %>% 
# colnames() %>% 
# as.data.frame()

# colnames(col)[1] <- "PRJNA685168"
# print(col)
```

<br>

<!-- ## Read count distribution -->

<!-- ### Example 1 -->
<!-- Bioproject [PRJNA477349](https://www.ncbi.nlm.nih.gov/sra/?term=PRJNA477349) (Bushmeat project). -->

<!-- ![](images/variable_freq.svg) -->

<!-- <br><br> -->

<!-- ### Example 2 -->
<!-- Bioproject [PRJNA685168](https://www.ncbi.nlm.nih.gov/sra/?term=PRJNA685168) (IBD project). -->

<!-- ![](images/ibd_variable_freq.svg) -->

<!-- <br><br> -->

## Sample collection points
- Does the metadata contains latitudes and longitudes (lat-lon) of the collection point? 
- You may consider dropping a pin on exact location. 
- The [`leaflet`](https://rstudio.github.io/leaflet/) R package can do a great job in dropping a pin on the corresponding coordinate. 
- Note that samples collected on the same coordinate will overlap. 
- You can zoom in-out to expand or minimize the map. 
- You can also mouse over the pin to see the variable label. 

<br>

<!-- ![Static image from the interactive HTML map converted using the html2image package.](images/sample_gps.png) -->